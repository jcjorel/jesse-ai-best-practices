<!-- CACHE_METADATA_START -->
<!-- Source File: {PROJECT_ROOT}/.knowledge/git-clones/strands_sdk_python/.pre-commit-config.yaml -->
<!-- Cached On: 2025-07-07T22:37:20.830353 -->
<!-- Source Modified: 2025-06-30T17:02:52.895757 -->
<!-- Cache Version: 1.0 -->
<!-- CACHE_METADATA_END -->

#### Functional Intent & Features

This `pre-commit-config.yaml` file establishes automated code quality enforcement through Git pre-commit hooks, providing continuous integration validation for formatting, linting, type checking, testing, and commit message standards. The configuration enables development workflow automation by executing quality checks before code commits, preventing defective code from entering the repository. Key semantic entities include `repos`, `hooks`, `hatch fmt --formatter`, `hatch run test-lint`, `hatch test`, `commitizen`, `pre-commit`, `commit-msg` stages, and `python` file type filtering. The file implements a comprehensive quality gate system using `local` repository configuration with `system` language execution for `Hatch` build tool integration.

##### Main Components

The configuration contains a single `local` repository definition with five distinct hooks: `hatch-format` for code formatting using `hatch fmt --formatter`, `hatch-lint` for code linting via `hatch run test-lint`, `hatch-test-lint` for type checking through `hatch run test-lint`, `hatch-test` for unit test execution using `hatch test`, and `commitizen-check` for commit message validation via `hatch run cz check --commit-msg-file`. Each hook specifies execution parameters including `language: system`, `pass_filenames: false`, and stage-specific triggers for `pre-commit` and `commit-msg` events.

###### Architecture & Design

The configuration follows a local hook architecture pattern where all quality checks execute through the `Hatch` build system rather than external repositories or tools. The design implements stage-based execution with four hooks running during `pre-commit` stage and one hook executing during `commit-msg` stage. The architecture employs `system` language execution with filename passing disabled, allowing `Hatch` to manage file discovery and processing through its own mechanisms.

####### Implementation Approach

The implementation uses `local` repository configuration to avoid external dependencies while leveraging `Hatch` commands for all quality operations. Each hook disables filename passing through `pass_filenames: false`, allowing `Hatch` to determine file scope internally. The approach implements Python-specific filtering via `types: [python]` for code quality hooks while using stage-specific execution for `commitizen-check` during commit message validation. The strategy centralizes tool execution through `Hatch` while maintaining granular hook separation for different quality aspects.

######## External Dependencies & Integration Points

**→ References:**
- `hatch` (external tool) - Build system and project management tool for Python
- `commitizen` (external tool) - Conventional commit message validation tool
- `pre-commit` (external framework) - Git hook management system
- Git version control system - Commit and pre-commit hook integration
- Python interpreter - Runtime environment for code execution and validation

**← Referenced by:**
- Git repository - Automatic execution during commit operations
- Developer workflow - Local development environment integration
- CI/CD pipeline - Continuous integration quality validation
- Code review process - Quality gate enforcement before review

**⚡ Integration:**
This configuration serves as the primary quality enforcement mechanism for the Strands Agents repository, integrating `Hatch` build system capabilities with Git workflow automation to ensure consistent code quality standards across all development activities.

######### Edge Cases & Error Handling

The configuration handles tool availability through `system` language specification, requiring `Hatch` and `commitizen` to be available in the system PATH. Hook failures prevent commit completion, ensuring quality standards enforcement even when individual tools encounter errors. The `pass_filenames: false` setting prevents filename-related issues while allowing `Hatch` to manage file discovery internally. Stage separation ensures commit message validation occurs independently of code quality checks, preventing interference between different validation phases.

########## Internal Implementation Details

Each hook uses `system` language execution to invoke `Hatch` commands directly from the shell environment, bypassing pre-commit's language-specific environments. The `pass_filenames: false` configuration delegates file management to `Hatch` rather than pre-commit's file discovery mechanisms. Hook naming follows descriptive patterns with `hatch-` prefixes for build system operations and `commitizen-check` for commit message validation. The configuration maintains consistent formatting with YAML list structures and explicit stage declarations for execution control.

########### Code Usage Examples

These configuration examples demonstrate the pre-commit hook setup patterns and YAML structure. The examples show how to define local repository hooks with system-based execution for build tool integration.

Basic pre-commit configuration structure demonstrating local repository setup with system-based hook execution:

```yaml
repos:
  - repo: local
    hooks:
      - id: hatch-format
        name: Format code
        entry: hatch fmt --formatter
        language: system
        pass_filenames: false
        types: [python]
        stages: [pre-commit]
```

Hook configuration pattern for testing and linting integration with Hatch build system:

```yaml
      - id: hatch-test
        name: Unit tests
        entry: hatch test
        language: system
        pass_filenames: false
        types: [python]
        stages: [pre-commit]
```

Commit message validation hook setup using commitizen for conventional commit enforcement:

```yaml
      - id: commitizen-check
        name: Check commit message
        entry: hatch run cz check --commit-msg-file
        language: system
        stages: [commit-msg]
```