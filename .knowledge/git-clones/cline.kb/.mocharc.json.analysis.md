<!-- CACHE_METADATA_START -->
<!-- Source File: {PROJECT_ROOT}/.knowledge/git-clones/cline/.mocharc.json -->
<!-- Cached On: 2025-07-09T04:55:15.161587 -->
<!-- Source Modified: 2025-06-27T12:14:47.909889 -->
<!-- Cache Version: 1.0 -->
<!-- CACHE_METADATA_END -->

#### Functional Intent & Features

This file serves as a `Mocha` test runner configuration that defines TypeScript test execution parameters for automated testing workflows across the project's source code and ESLint rule validation. The configuration provides TypeScript test support through `extension: ["ts"]`, comprehensive test discovery via `spec` patterns targeting `src/**/__tests__/*.ts` and `eslint-rules/__tests__/**/*.test.ts`, and runtime environment setup through `require` array including `ts-node/register`, `source-map-support/register`, and `./src/test/requires.ts`. Key semantic entities include `Mocha` test framework, `JSON` configuration format, `extension` file type specification, `spec` glob patterns, `require` module loading array, `recursive: true` directory traversal, `ts-node/register` TypeScript compilation, `source-map-support/register` debugging support, and custom test setup file `./src/test/requires.ts`. The configuration implements comprehensive test automation by enabling TypeScript execution, source map debugging, and custom test environment initialization across both application code and linting rule validation.

##### Main Components

The configuration contains four primary sections: file extension specification using `extension: ["ts"]` to enable TypeScript test file processing, test file discovery through `spec` array defining glob patterns for main application tests in `src/**/__tests__/` and ESLint rule tests in `eslint-rules/__tests__/`, runtime module requirements via `require` array loading TypeScript compilation, source map support, and custom test setup, and execution behavior control through `recursive: true` enabling deep directory traversal for test discovery. Each component addresses specific aspects of TypeScript test execution and environment preparation.

###### Architecture & Design

The configuration follows a declarative test setup architecture that separates file discovery, compilation requirements, and execution parameters through distinct configuration sections. The design implements dual test location support with separate patterns for application tests and ESLint rule validation tests, enabling modular test organization. The architecture uses module pre-loading through the `require` array to establish necessary runtime environments before test execution begins. The structure provides comprehensive TypeScript support through `ts-node` integration and debugging capabilities via source map registration.

####### Implementation Approach

The implementation uses Mocha's JSON configuration format with array-based specifications for file patterns and module requirements. The approach employs glob pattern matching with `**` recursive wildcards to discover test files across nested directory structures. Module loading uses the `require` array to pre-load essential runtime dependencies including TypeScript compilation, source map support, and custom test environment setup. The strategy enables recursive directory traversal through the `recursive: true` flag, ensuring comprehensive test discovery regardless of directory depth.

######## External Dependencies & Integration Points

**â†’ References:**
- `Mocha` (external library) - JavaScript test framework that processes this configuration for test execution
- `ts-node/register` (external library) - TypeScript compilation module enabling direct TypeScript test execution
- `source-map-support/register` (external library) - source map debugging support for TypeScript stack traces
- `src/**/__tests__/` directory - primary application test location following conventional test organization
- `eslint-rules/__tests__/` directory - ESLint rule validation test location for custom linting rules
- `./src/test/requires.ts` - custom test setup file providing project-specific test environment configuration

######### Edge Cases & Error Handling

The configuration handles TypeScript compilation errors through `ts-node/register` integration, which provides runtime compilation and error reporting for test files. Edge cases include missing test files in specified directories, addressed through glob pattern flexibility that continues execution with available tests. The framework manages source map resolution issues through explicit `source-map-support/register` loading, ensuring accurate stack traces for debugging. Custom test setup failures are handled through the `./src/test/requires.ts` file, which can implement project-specific error handling and environment validation.

########## Internal Implementation Details

The `extension: ["ts"]` specification instructs Mocha to recognize TypeScript files as executable test files rather than requiring compilation artifacts. The `spec` array uses glob patterns with `**` for recursive directory matching and specific file naming conventions `*.ts` and `*.test.ts` for test identification. The `require` array executes modules in order during Mocha initialization, establishing TypeScript compilation, source map support, and custom environment setup before any test files are loaded. The `recursive: true` flag enables deep directory traversal for test discovery across complex project structures.

########### Code Usage Examples

To execute tests using this Mocha configuration, developers run the standard Mocha command which automatically loads the configuration:

```bash
npx mocha
```

This command discovers and executes all TypeScript test files matching the specified patterns, applying the configured runtime requirements and recursive directory traversal for comprehensive test coverage.

For running specific test suites while maintaining the configuration benefits, developers can override the spec patterns:

```bash
npx mocha "src/specific-module/__tests__/*.ts"
```

This example demonstrates targeted test execution while preserving the TypeScript compilation, source map support, and custom test setup defined in the configuration file.